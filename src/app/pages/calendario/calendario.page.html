<ion-header>
  <ion-toolbar>
    <ion-buttons slot="">
      <ion-menu-button class="menu-button-externo"></ion-menu-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>
  <div class="calendar-container">
    <!-- top banner -->
    <div class="month-banner">
      <div class="month-left">
        <div class="month-day">{{ (current.getDate() | number:'2.0') }}</div>
        <div class="month-sun">☀️</div>
      </div>
      <div class="month-center">
        <div class="month-number">{{ (currentMonth + 1) | number:'2.0' }}</div>
        <div class="month-name">{{ getMonthNameShort(currentMonth) }}</div>
      </div>
      <div class="month-right">
        <div class="year">{{ currentYear }}</div>
      </div>
    </div>

    <!-- controls -->
    <div class="nav-controls">
      <button class="nav-btn" (click)="prevMonth()">◀</button>
      <div class="nav-title">{{ getMonthNameShort(currentMonth) }} {{ currentYear }}</div>
      <button class="nav-btn" (click)="nextMonth()">▶</button>
    </div>

    <!-- weekdays -->
    <div class="weekday-row">
      <div *ngFor="let w of ['D','S','T','Q','Q','S','S']" class="weekday">{{ w }}</div>
    </div>

    <!-- calendar grid -->
    <div class="calendar-grid">
      <div *ngFor="let week of weeks" class="week-row">
        <div *ngFor="let day of week"
             class="day-cell"
             [class.out-month]="!day.inMonth"
             [class.has-event]="day.event"
             (click)="openEventModal(day)">
          <div class="day-number" *ngIf="day.inMonth">{{ day.dayNumber }}</div>

          <div *ngIf="day.event" class="event-title">{{ day.event.title }}</div>
        </div>
      </div>
    </div>

    <!-- Event Modal -->
    <div class="modal-overlay" *ngIf="showEventModal" (click)="closeEventModal()">
      <div class="modal-content" (click)="$event.stopPropagation()">
        <div class="modal-header">
          <h3>Evento do Dia</h3>
          <button class="close-btn" (click)="closeEventModal()">
            <ion-icon name="close-outline"></ion-icon>
          </button>
        </div>
        <div class="modal-body">
          <p class="event-text">{{ selectedEvent?.title }}</p>
        </div>
      </div>
    </div>
  </div>
</ion-content>