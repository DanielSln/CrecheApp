<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button class="menu-button-externo"></ion-menu-button>
    </ion-buttons>
    <ion-title>Meus Comunicados</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <div class="page-content">
    <div class="title">HistÃ³rico de Recados Enviados: <span class="counter">({{ comunicados.length }})</span></div>
    
    <ng-container *ngIf="comunicados && comunicados.length > 0; else vazio">
      <div 
        class="comunicado-card" 
        *ngFor="let comunicado of comunicados; let i = index" 
        (click)="openComunicado(comunicado.id)"
      >
        <div class="comunicado-avatar" [ngClass]="comunicado.type || 'default'">{{ comunicado.emoji || 'ğŸ“' }}</div>
        <div class="comunicado-content">
          <div class="comunicado-header">
            <h3>{{ comunicado.title || 'Sem tÃ­tulo' }}</h3>
          </div>
          <p>{{ comunicado.preview || (comunicado.content | slice:0:100) }}</p>
        </div>
        <div class="comunicado-meta">
          <span 
            class="comunicado-badge" 
            [ngClass]="comunicado.type" 
            *ngIf="comunicado.type === 'urgent' || comunicado.type === 'info'"
          >
            {{ comunicado.type === 'urgent' ? 'URGENTE' : 'INFO' }}
          </span>
          <span class="comunicado-date">{{ comunicado.date || 'Data nÃ£o informada' }}</span>
        </div>
      </div>
    </ng-container>

    <ng-template #vazio>
      <div class="empty-state">
        <div class="empty-icon">ğŸ“</div>
        <h3>Nenhum comunicado enviado</h3>
        <p>VocÃª ainda nÃ£o enviou nenhum comunicado.</p>
      </div>
    </ng-template>

    <!-- BotÃµes de aÃ§Ã£o no final da lista -->
    <div class="button-group">
      <ion-button expand="block" class="action-btn" (click)="irParaEscrever()">
        <ion-icon [icon]="pencil" slot="start"></ion-icon>
        Novo Comunicado
      </ion-button>
      <ion-button expand="block" class="action-btn secondary" (click)="verRascunhos()">
        ğŸ“ Ver Rascunhos
      </ion-button>
    </div>
  </div>
</ion-content>